# Hướng dẫn sử dụng tính năng Kế hoạch bữa ăn thông minh

## Tổng quan

Tính năng **Kế hoạch bữa ăn thông minh** của AnGiDay giúp bạn:

- 🛒 **Quản lý trạng thái đi chợ**: Tự động kiểm tra nguyên liệu có sẵn và tạo danh sách mua sắm
- 📦 **Quản lý kho nguyên liệu**: Theo dõi nguyên liệu trong tủ lạnh, tủ đông với cảnh báo hết hạn
- 👨‍🍳 **Chế độ nấu ăn**: Hướng dẫn nấu ăn từng bước với timer và theo dõi tiến độ

## Các tính năng chính

### 1. Trạng thái đi chợ cho thực đơn/kế hoạch

#### Cách hoạt động:
- Hệ thống tự động kiểm tra nguyên liệu có sẵn trong kho
- So sánh với nguyên liệu cần thiết cho thực đơn/kế hoạch
- Hiển thị trạng thái: **"Đã đủ nguyên liệu"** hoặc **"Thiếu nguyên liệu"**

#### Khi thiếu nguyên liệu:
- Hiển thị nút **"Đi chợ"**
- Liệt kê danh sách nguyên liệu cần mua
- Ước tính chi phí mua sắm
- Tạo danh sách mua sắm thông minh

#### Khi đủ nguyên liệu:
- Hiển thị nút **"Bắt đầu nấu"**
- Chuyển sang chế độ nấu ăn

### 2. Quản lý kho nguyên liệu (Inventory Management)

#### Tính năng:
- **Thêm nguyên liệu**: Tên, số lượng, đơn vị, vị trí lưu trữ, ngày hết hạn
- **Vị trí lưu trữ**: Tủ lạnh 🧊, Tủ đông ❄️, Kho 🏠, Tủ 🗄️
- **Cảnh báo thông minh**:
  - Nguyên liệu sắp hết (dưới mức tối thiểu)
  - Nguyên liệu sắp hết hạn (trong 3 ngày)
- **Thống kê**: Tổng nguyên liệu, giá trị kho, số danh mục

#### Cách sử dụng:
1. Nhấn **"Quản lý kho"** từ trang chính
2. Thêm nguyên liệu bằng nút **"Thêm nguyên liệu"**
3. Điền thông tin: tên, số lượng, đơn vị, vị trí, giá, ngày hết hạn
4. Theo dõi cảnh báo trong tab **"Cảnh báo"**

### 3. Mua sắm thông minh

#### Tính năng:
- **Chọn nhiều thực đơn/kế hoạch**: Tạo danh sách mua sắm tổng hợp
- **Loại bỏ trùng lặp**: Tự động gộp nguyên liệu giống nhau
- **Theo dõi tiến độ**: Đánh dấu đã mua, hiển thị % hoàn thành
- **Xuất danh sách**: Tải file text hoặc in danh sách

#### Cách sử dụng:
1. Nhấn **"Mua sắm thông minh"**
2. Chọn các thực đơn/kế hoạch muốn nấu
3. Nhấn **"Tạo danh sách mua sắm"**
4. Đánh dấu các mục đã mua khi đi chợ
5. Hoàn thành mua sắm

### 4. Chế độ nấu ăn

#### Tính năng:
- **Hướng dẫn từng bước**: Hiển thị nguyên liệu và cách làm chi tiết
- **Timer tích hợp**: Hẹn giờ cho các bước nấu (5p, 10p, 15p, 20p, 30p, 60p)
- **Theo dõi tiến độ**: Đánh dấu hoàn thành từng bước
- **Điều hướng**: Chuyển qua lại giữa các món ăn
- **Thống kê**: Thời gian nấu thực tế vs ước tính

#### Cách sử dụng:
1. Đảm bảo đã có đủ nguyên liệu (trạng thái "Sẵn sàng nấu")
2. Nhấn **"Bắt đầu nấu"** từ kế hoạch
3. Làm theo hướng dẫn từng bước
4. Sử dụng timer khi cần hẹn giờ
5. Đánh dấu hoàn thành từng bước
6. Chuyển sang món tiếp theo hoặc hoàn thành

## Quy trình sử dụng hoàn chỉnh

### Bước 1: Chuẩn bị kho nguyên liệu
1. Vào **"Quản lý kho"**
2. Thêm các nguyên liệu có sẵn trong tủ lạnh/kho
3. Cập nhật số lượng và ngày hết hạn

### Bước 2: Tạo/chọn kế hoạch bữa ăn
1. Tạo kế hoạch bữa ăn mới hoặc chọn thực đơn có sẵn
2. Hệ thống tự động kiểm tra trạng thái nguyên liệu

### Bước 3: Đi chợ (nếu cần)
1. Nếu thiếu nguyên liệu, nhấn **"Đi chợ"**
2. Xem danh sách cần mua và ước tính chi phí
3. Đi mua sắm theo danh sách
4. Đánh dấu đã mua các mục trong danh sách

### Bước 4: Cập nhật kho sau khi mua sắm
1. Vào **"Quản lý kho"**
2. Thêm nguyên liệu vừa mua vào kho
3. Hoặc hệ thống tự động thêm từ danh sách đã hoàn thành

### Bước 5: Bắt đầu nấu ăn
1. Khi đã đủ nguyên liệu, nhấn **"Bắt đầu nấu"**
2. Làm theo hướng dẫn từng bước
3. Sử dụng timer khi cần
4. Hoàn thành và thưởng thức!

## Demo và Test

### Truy cập Demo:
Vào địa chỉ: `http://localhost:8080/smart-meal-planning-demo`

### Dữ liệu Demo có sẵn:
- **Kế hoạch**: "Kế hoạch bữa trưa hôm nay" với Phở bò và Cơm tấm sườn nướng
- **Thực đơn**: "Thực đơn gia đình cuối tuần" với 3 món Việt Nam
- **Nguyên liệu**: Danh sách nguyên liệu chuẩn hóa

### Thử nghiệm:
1. **Test đi chợ**: Nhấn "Đi chợ" trên kế hoạch → Xem danh sách thiếu
2. **Test quản lý kho**: Nhấn "Quản lý kho" → Thêm nguyên liệu
3. **Test nấu ăn**: Sau khi có đủ nguyên liệu → Nhấn "Bắt đầu nấu"
4. **Test mua sắm thông minh**: Nhấn "Mua sắm thông minh" → Chọn nhiều thực đơn

## Cấu trúc kỹ thuật

### Các file chính:
- `src/types/meal-planning.ts`: Định nghĩa types cho inventory, shopping status
- `src/services/inventory-management.service.ts`: Logic quản lý kho và trạng thái
- `src/components/meal-planning/PlanShoppingStatus.tsx`: Component hiển thị trạng thái
- `src/components/meal-planning/SmartShoppingList.tsx`: Danh sách mua sắm thông minh
- `src/components/meal-planning/CookingMode.tsx`: Chế độ nấu ăn
- `src/components/meal-planning/InventoryManager.tsx`: Quản lý kho nguyên liệu
- `src/components/meal-planning/EnhancedMealPlanningHub.tsx`: Hub tổng hợp

### Lưu trữ dữ liệu:
- **LocalStorage keys**:
  - `angiday_inventory`: Dữ liệu kho nguyên liệu
  - `angiday_plan_status`: Trạng thái kế hoạch
  - `angiday_cooking_sessions`: Phiên nấu ăn
  - `angiday_shopping_lists`: Danh sách mua sắm

## Tính năng nâng cao

### 1. Cảnh báo thông minh:
- Nguyên liệu sắp hết hạn
- Nguyên liệu dưới mức tối thiểu
- Gợi ý thực đơn dựa trên nguyên liệu có sẵn

### 2. Tối ưu hóa chi phí:
- Ước tính chi phí mua sắm
- So sánh giá nguyên liệu
- Gợi ý thay thế nguyên liệu

### 3. Theo dõi dinh dưỡng:
- Tính toán dinh dưỡng từ nguyên liệu
- Cảnh báo thiếu hụt dinh dưỡng
- Gợi ý cân bằng bữa ăn

## Lưu ý và Tips

### 🔧 Kỹ thuật:
- Dữ liệu được lưu trong LocalStorage (demo)
- Production nên sử dụng database thực
- Cần tích hợp API giá cả thực tế

### 💡 Sử dụng:
- Cập nhật kho thường xuyên để có kết quả chính xác
- Đặt ngày hết hạn cho nguyên liệu dễ hỏng
- Sử dụng timer khi nấu để đảm bảo chất lượng món ăn

### 🚀 Mở rộng:
- Tích hợp với siêu thị online
- Nhận diện nguyên liệu bằng AI
- Gợi ý thực đơn dựa trên thời tiết, sở thích
- Chia sẻ kế hoạch với gia đình

---

**Chúc bạn có những bữa ăn ngon miệng với AnGiDay! 🍽️**
